<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>PodAtlas</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="{{ STATIC_URL }}css/project.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ STATIC_URL }}css/jquery-jvectormap-1.2.2.css" type="text/css" media="screen"/>



    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="{{ STATIC_URL }}js/jquery-jvectormap-1.2.2.min.js"></script>
    <script src="http://jvectormap.com/js/jquery-jvectormap-world-mill-en.js"></script>
</head>

<body>
<div>
    <div class="logo">
        <h2>NEWS PER CAPITA</h2>
        <h5>
            Built at
            <a href="www.hackaway.com">
                Hackaway
            </a>
            2014 with
            <a href="www.sr.se">
                SR
            </a>
            by team i18n
        </h5>
    </div>

        <div>
            <div id="world-map" style="width: 1000px; height: 500px"></div>

            <div class="click">
                {% for country in countries %}
                    {% include "country.html" %}
                {% endfor %}
            </div>
        </div>

        </div>
        </div>

        <script>
            var podcastsPerCapitaData = {{ podcasts_per_captia_data|safe }},
                    populationData = {{ population_data|safe }},
                    podcastsData = {{ podcasts_data|safe }};

            $(function(){
                $('#world-map').vectorMap({
                    map: 'world_mill_en',
                    series: {
                        regions: [{
                            values: populationData,
                            scale: ['#C9F4F3', '#046604'],
                            normalizeFunction: 'polynomial'
                        }]
                    },
                    onRegionClick: function(event, code){
                        $("#" + code).show();
                    },
                    onRegionLabelShow: function(event, label, code) {
                        label.html(
                                label.html()
                                        + "</br> Podcasts: "
                                        + podcastsData[code]
                                        + "</br> Population: "
                                        + populationData[code]);
                            },
                    backgroundColor: '#ccffff'
                });
            });

        </script>
    </div>
</div>
</body>
</html>
